<h2><a href="https://leetcode.com/problems/copy-list-with-random-pointer/">138. Copy List with Random Pointer</a></h2><h3>Medium</h3><hr><div><p data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">A linked list of length <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">n</code> is given such that each node contains an additional random pointer, which could point to any node in the list, or <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">null</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-TW" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">給定長度 <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">n</code> 的鏈錶，以便每個節點包含一個額外的隨機指標，該指標可以指向清單中的任何節點，或 <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">null</code> .</font></font></font></p>

<p data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">Construct a <a href="https://en.wikipedia.org/wiki/Object_copying#Deep_copy" target="_blank" data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d"><strong data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">deep copy</strong></a> of the list. The deep copy should consist of exactly <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">n</code> <strong data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">brand new</strong> nodes, where each new node has its value set to the value of its corresponding original node. Both the <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">next</code> and <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">random</code> pointer of the new nodes should point to new nodes in the copied list such that the pointers in the original list and copied list represent the same list state. <strong data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">None of the pointers in the new list should point to nodes in the original list</strong>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-TW" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">構建清單的深層副本。深層副本應完全 <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">n</code> 由全新的節點組成，其中每個新節點的值都設置為其相應的原始節點的值。新節點的 和 <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">next</code> <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">random</code> 指標都應指向複製清單中的新節點，以便原始清單和複製清單中的指標表示相同的清單狀態。新清單中的任何指標都不應指向原始清單中的節點。</font></font></font></p>

<p data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">For example, if there are two nodes <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">X</code> and <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">Y</code> in the original list, where <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">X.random --&gt; Y</code>, then for the corresponding two nodes <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">x</code> and <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">y</code> in the copied list, <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">x.random --&gt; y</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-TW" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例如，如果有兩個節點並且在 <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">Y</code> 原始清單中，其中 <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">X.random --&gt; Y</code> ，則對於相應的兩個節點 <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">x</code>  <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">X</code> 並在 <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">y</code> 複製的清單中， <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">x.random --&gt; y</code> .</font></font></font></p>

<p data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">Return <em data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">the head of the copied linked list</em>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-TW" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">返回複製的鏈表的頭部。</font></font></font></p>

<p data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">The linked list is represented in the input/output as a list of <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">n</code> nodes. Each node is represented as a pair of <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">[val, random_index]</code> where:<font class="notranslate immersive-translate-target-wrapper" lang="zh-TW" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">鏈表在輸入/輸出中表示為 <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">n</code> 節點清單。每個節點表示為一對， <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">[val, random_index]</code> 其中：</font></font></font></p>

<ul>
	<li data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d"><code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">val</code>: an integer representing <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">Node.val</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-TW" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">val</code> ：一個整數，表示 <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">Node.val</code> </font></font></font></li>
	<li data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d"><code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">random_index</code>: the index of the node (range from <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">0</code> to <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">n-1</code>) that the <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">random</code> pointer points to, or <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">null</code> if it does not point to any node.<font class="notranslate immersive-translate-target-wrapper" lang="zh-TW" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">random_index</code> ： <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">random</code> 指標指向的節點的索引（範圍從 <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">0</code> 到 <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">n-1</code> ），或者 <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">null</code> 如果它不指向任何節點。</font></font></font></li>
</ul>

<p data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">Your code will <strong data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">only</strong> be given the <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">head</code> of the original linked list.<font class="notranslate immersive-translate-target-wrapper" lang="zh-TW" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您的代碼將僅獲得原始鏈表 <code data-immersive-translate-effect="1" data-immersive_translate_walked="e8bd1fae-828c-499b-80e4-75989d054d4d">head</code> 的代碼。</font></font></font></p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>
<img alt="" src="https://assets.leetcode.com/uploads/2019/12/18/e1.png" style="width: 700px; height: 142px;">
<pre><strong>Input:</strong> head = [[7,null],[13,0],[11,4],[10,2],[1,0]]
<strong>Output:</strong> [[7,null],[13,0],[11,4],[10,2],[1,0]]
</pre>

<p><strong class="example">Example 2:</strong></p>
<img alt="" src="https://assets.leetcode.com/uploads/2019/12/18/e2.png" style="width: 700px; height: 114px;">
<pre><strong>Input:</strong> head = [[1,1],[2,1]]
<strong>Output:</strong> [[1,1],[2,1]]
</pre>

<p><strong class="example">Example 3:</strong></p>

<p><strong><img alt="" src="https://assets.leetcode.com/uploads/2019/12/18/e3.png" style="width: 700px; height: 122px;"></strong></p>

<pre><strong>Input:</strong> head = [[3,null],[3,0],[3,null]]
<strong>Output:</strong> [[3,null],[3,0],[3,null]]
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>0 &lt;= n &lt;= 1000</code></li>
	<li><code>-10<sup>4</sup> &lt;= Node.val &lt;= 10<sup>4</sup></code></li>
	<li><code>Node.random</code> is <code>null</code> or is pointing to some node in the linked list.</li>
</ul>
</div>